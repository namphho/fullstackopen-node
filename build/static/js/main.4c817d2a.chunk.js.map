{"version":3,"sources":["services/phones.js","components/Filter.js","components/Persons.js","components/PersonsForm.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","resp","data","newPerson","post","id","delete","newObject","put","Filter","value","onChange","Persons","persons","deletePerson","map","person","name","number","onClick","PersonsForm","onNameChange","phone","onPhoneChange","onSubmit","console","log","type","Notification","message","isError","className","App","useState","setPersons","newName","setNewName","newPhone","setNewPhone","searchText","setSearchText","msg","notiBundle","setNotifiBundle","useEffect","PhoneService","initialData","personsToShow","filter","toLowerCase","includes","replaceNumberForExistingPerson","window","confirm","changedPerson","returnedPerson","p","showNotificationMsg","setTimeout","event","target","preventDefault","found","find","undefined","alert","concat","splice","findIndex","catch","error","deletePersonById","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4c817d2a.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n//\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((resp) => resp.data);\n};\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((resp) => resp.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((resp) => resp.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((resp) => resp.data);\n};\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  getAll,\n  create,\n  deletePerson,\n  update,\n};\n","const Filter = ({ value, onChange }) => {\n  return (\n    <>\n      <div>\n        filter shown with <input value={value} onChange={onChange} />\n      </div>\n    </>\n  );\n};\n\nexport default Filter;","const Persons = ({ persons, deletePerson }) => {\n  return persons.map((person) => (\n    <p key={person.id}>\n      {person.name} {person.number}\n      <button onClick={() => deletePerson(person.id)}>delete</button>\n    </p>\n  ));\n};\n\nexport default Persons;\n","const PersonsForm = ({\n  name,\n  onNameChange,\n  phone,\n  onPhoneChange,\n  onSubmit,\n}) => {\n  console.log(\"renderingn....\", name);\n  return (\n    <form>\n      <div>\n        name: <input value={name} onChange={onNameChange} />\n      </div>\n      <div>\n        phone: <input value={phone} onChange={onPhoneChange} />\n      </div>\n      <div>\n        <button type=\"submit\" onClick={onSubmit}>\n          add\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonsForm;\n","const Notification = ({ message, isError }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className={isError ? \"error\" : \"success\"}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useEffect, useState } from \"react\";\nimport PhoneService from \"./services/phones\";\nimport Filter from \"./components/Filter\";\nimport Persons from \"./components/Persons\";\nimport PersonsForm from \"./components/PersonsForm\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [searchText, setSearchText] = useState(\"\");\n  const [notiBundle, setNotifiBundle] = useState({msg: null, isError: null});\n\n  const hookPersons = () => {\n    PhoneService.getAll().then((initialData) => {\n      setPersons(initialData);\n    });\n  };\n\n  useEffect(hookPersons, []);\n\n  const personsToShow = persons.filter((person) =>\n    person.name.toLowerCase().includes(searchText.toLowerCase())\n  );\n\n  const onNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const onPhoneChange = (event) => setNewPhone(event.target.value);\n\n  const onSearchTextChange = (event) => setSearchText(event.target.value);\n\n  const addNew = (event) => {\n    event.preventDefault();\n    const found = persons.find((p) => p.name === newName);\n    if (found !== undefined) {\n      if (found.number === newPhone) {\n        alert(`${newName} is already added to phonebook`);\n      } else {\n        console.log(\"replace phone number\");\n        replaceNumberForExistingPerson(found);\n      }\n      setNewName(\"\");\n      setNewPhone(\"\");\n      return;\n    }\n\n    const userObject = {\n      name: newName,\n      number: newPhone,\n    };\n    PhoneService.create(userObject).then((newPerson) => {\n      showNotificationMsg(`Added ${newPerson.name}`, false);\n      setPersons(persons.concat(newPerson));\n      setNewName(\"\");\n      setNewPhone(\"\");\n    });\n  };\n\n  const replaceNumberForExistingPerson = (person) => {\n    const msg = `${person.name} is already added to phonebook, replace the old number with a new one?`;\n\n    const result = window.confirm(msg);\n    if (result) {\n      const changedPerson = { ...person, number: newPhone };\n      PhoneService.update(person.id, changedPerson).then((returnedPerson) => {\n        setPersons(\n          persons.map((p) => (p.id === person.id ? returnedPerson : p))\n        );\n      });\n    }\n  };\n\n  const deletePersonById = (id) => {\n    const person = persons.filter((p) => p.id === id);\n    const msg = `delete ${person[0].name}`;\n\n    const result = window.confirm(msg);\n    if (result) {\n      PhoneService.deletePerson(id).then((resp) => {\n        persons.splice(\n          persons.findIndex((p) => p.id === id),\n          1\n        );\n        setPersons([...persons]);\n      }).catch(error => {\n        showNotificationMsg(`Information of ${person[0].name} has already been removed from server`, true);\n        persons.splice(\n          persons.findIndex((p) => p.id === id),\n          1\n        );\n        setPersons([...persons]);\n      });\n    }\n  };\n\n  const showNotificationMsg = (msg, isError) => {\n    setNotifiBundle({msg, isError});\n    setTimeout(() => {\n      setNotifiBundle({ msg: null, isError: null });\n    }, 3000);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        message={notiBundle.msg}\n        isError={notiBundle.isError}\n      />\n      <Filter value={searchText} onChange={onSearchTextChange} />\n      <h2>Add New</h2>\n      <PersonsForm\n        name={newName}\n        onNameChange={onNameChange}\n        phone={newPhone}\n        onPhoneChange={onPhoneChange}\n        onSubmit={addNew}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={personsToShow}\n        deletePerson={(id) => deletePersonById(id)}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}